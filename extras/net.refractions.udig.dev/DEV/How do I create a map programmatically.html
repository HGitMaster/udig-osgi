<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>UDIG Developer Guide : How do I create a map programmatically</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- UDIG Developer Guide : How do I create a map programmatically -->
       <h1>How do I create a map programmatically</h1>

       <p><b>Q: How do I create a map programmatically?</b></p>

<p><b>A:</b> <br/>
uDig 1.0.x branch:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">Project owner = <span class="code-comment">// somehow get a project
</span><span class="code-object">String</span> name=<span class="code-quote">"MapName"</span>;

<span class="code-comment">// create the map
</span>IMap map = ProjectFactory.eINSTANCE.createMap(owner, name, <span class="code-keyword">new</span> ArrayList());

LayerFactory layerFactory = map.getLayerFactory();
List&lt;Layer&gt; toAdd=<span class="code-keyword">new</span> ArrayList&lt;Layer&gt;(resources.size());
<span class="code-keyword">for</span>( IGeoResource resource : resources ) {
    Layer layer = layerFactory.createLayer(resource);
    toAdd.add(layer);
}

map.getLayersInternal().addAll(toAdd);</pre>
</div></div>
<p>uDig 1.1.x branch:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">CreateMapCommand command=<span class="code-keyword">new</span> CreateMapCommand(<span class="code-quote">"MapName"</span>, listofGeoResources, project);
project.sendSync(command);
IMap map=command.getCreatedMap();</pre>
</div></div>

<small>
  (c) Copyright (c) 2004-2008 Refractions Research Inc. and others.<br>
  <a href="http://udig.refractions.net/confluence/pages/viewpage.action?pageId=8298">[wiki]</a>
</small>
    </body>
</html>
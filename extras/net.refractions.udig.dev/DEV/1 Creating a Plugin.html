<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>UDIG Developer Guide : 1 Creating a Plugin</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- UDIG Developer Guide : 1 Creating a Plugin -->
       <h1>1 Creating a Plugin</h1>

       <h5><a name="1CreatingaPlugin-1%29StarttheNewProjectWizard"></a>1) Start the New Project Wizard </h5>

<ul>
	<li>File-&gt;New-&gt;Project<br/>
<img src="download/attachments/26/NewProject.jpg" align="absmiddle" border="0"/></li>
	<li>Select "Plug-in Project"</li>
	<li>Next</li>
</ul>


<h5><a name="1CreatingaPlugin-2%29PluginProject"></a>2) Plug-in Project</h5>

<p><img src="download/attachments/26/NewProject1.jpg" align="absmiddle" border="0"/></p>
<ul>
	<li>Set the project name: <br clear="all" /> agrees with package structure, starts with net.refractions.udig.&#42;</li>
	<li>Project contents: <br clear="all" /> use default</li>
	<li>Project Settings: <br clear="all" /> Create a Java project <br clear="all" /> default src and bin folders are fine</li>
	<li>Alternate Format: <br clear="all" /> Apprently it is not worth using the the OSGi bundle manifest at this time (see panel below)</li>
	<li>Next</li>
</ul>


<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b>Plugin Name</b><br />
<p>What is in a name? Well a clue on what the plugin is for:</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Project </th>
<th class='confluenceTh'> Example </th>
<th class='confluenceTh'> Naming Convention </th>
</tr>
<tr>
<td class='confluenceTd'> Plug-In </td>
<td class='confluenceTd'> net.refractions.udig.render </td>
<td class='confluenceTd'> named in agreement with internal package structure </td>
</tr>
<tr>
<td class='confluenceTd'> JUnit Test Plug-In </td>
<td class='confluenceTd'> net.refractions.udig.render-test </td>
<td class='confluenceTd'> Append "-test" </td>
</tr>
<tr>
<td class='confluenceTd'> Plug-In Fragment </td>
<td class='confluenceTd'> net.refractions.udig.german </td>
<td class='confluenceTd'> Provide ".<em>language</em>" file at the root udig </td>
</tr>
<tr>
<td class='confluenceTd'> Plug-In Fragment </td>
<td class='confluenceTd'> net.refractions.render-1 </td>
<td class='confluenceTd'> Do anything except add a dot </td>
</tr>
<tr>
<td class='confluenceTd'> Features  </td>
<td class='confluenceTd'> net.refractions.udig.render-feature </td>
<td class='confluenceTd'>  Append "-feature" to associated root Plug-In </td>
</tr>
</tbody></table>
<p>The following was taken from the <a href="http://udig.refractions.net/confluence//display/UDIG/Repository+Structure" title="Repository Structure">Repository Structure</a> page.</p></td></tr></table></div>

<div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>OSGi (from Rich Client Tutorial - Part 1)</b></div><div class="panelContent">
<p>Eclipse 3.0 introduced a new run-time system based on OSGi standards that uses bundles and a new manifest file (MANIFEST.MF) to implement plug-ins. The use of MANIFEST.MF, in normal circumstances, is completely optional.</p>

<p>You will notice that almost all of the 3.0 SDK plug-ins do NOT have one yet all are marked as 3.0 and many do not require the compatibility layer. The only reason you would want to have a MANIFEST.MF is if you need to use a particular OSGi capability that is not exposed through plugin.xml (for example, import-package). </p>

<p>Otherwise it's recommended at this time that you don't have one.</p>
</div></div>

<h5><a name="1CreatingaPlugin-3%29PlugInContent"></a>3) Plug-In Content</h5>

<p><img src="download/attachments/26/NewProject2.jpg" align="absmiddle" border="0"/></p>
<ul>
	<li>Plug-in Properties
	<ul>
		<li>Plug-in ID: Recommended that this is the same as the full package name (and project name)</li>
		<li>Plug-in Version: change to 0.1.0 (or whatever we are current working towards)
		<ul>
			<li>It is important to ensure that a version number has 3 digits, version numbers with only 2 digits have been  known to cause odd bugs when other plugins depend on them.</li>
		</ul>
		</li>
		<li>Plug-in Name: name as appropriate (recommended that you prepend "uDig ")</li>
		<li>Plug-in Proivider:  often "Refractions Research, Inc."</li>
		<li>Runtime Library: change to prevent conflict (recommended that you prepend "udig-")</li>
	</ul>
	</li>
	<li>Plug-in Class (often not needed)
	<ul>
		<li>Generate: only check if neededConfluence - Home</li>
		<li>Class Name: name appropriately</li>
		<li>Check "This plug-in will make contributions to the UI" to access Templates</li>
	</ul>
	</li>
	<li>Next</li>
</ul>


<div class="panel" style="border-width: 1px;"><div class="panelHeader" style="border-bottom-width: 1px;"><b>Plug-in Class (from Rich Client Tutorial - Part 1)</b></div><div class="panelContent">
<p>The generated plug-in class that you may be familiar with in previous releases is no longer required in Eclipse 3.0. You can still have one to hold global data if you like.</p>
<hr />
<p>In this case we would like to hold some global data,  rather than use a singleton. This allows us to cleanup after the<br/>
application (something that is hard with singletons).</p>
</div></div>

<h5><a name="1CreatingaPlugin-4%29Templates"></a>4) Templates</h5>
<p>(Only available when making a UI Plug-in Class)</p>

<p><img src="download/attachments/26/NewProject3.jpg" align="absmiddle" border="0"/></p>
<ul>
	<li>Finish or ...</li>
	<li>Check "Create a plug-in using one of the templates"
	<ul>
		<li>Choose a ui wizard (such as "Custom plug-in wizard")</li>
		<li>Next (to start filling out the template)</li>
	</ul>
	</li>
</ul>


<h4><a name="1CreatingaPlugin-5%29TemplateSelection"></a>5) Template Selection</h4>
<p>(Only available when using "Custom plug-in wizard")</p>

<h5><a name="1CreatingaPlugin-5%29TemplateSelection"></a>5) Template Selection</h5>

<p><img src="download/attachments/26/NewProject4.jpg" align="absmiddle" border="0"/></p>
<ul>
	<li>Choose wizard components from the list according to the needs of your plug-in</li>
	<li>Next (to work with selected wizards)</li>
</ul>


<small>
  (c) Copyright (c) 2004-2008 Refractions Research Inc. and others.<br>
  <a href="http://udig.refractions.net/confluence/pages/viewpage.action?pageId=26">[wiki]</a>
</small>
    </body>
</html>
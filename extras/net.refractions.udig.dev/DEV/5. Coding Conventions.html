<html>
    <head>
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" href="../book.css" type="text/css" />
        <title>UDIG Developer Guide : 5. Coding Conventions</title>
    </head>
    <body BGCOLOR="#FFFFFF">
       <!-- UDIG Developer Guide : 5. Coding Conventions -->
       <h1>5. Coding Conventions</h1>

       <p>As a strict policy we do our best to <b>use the tools</b> to capture our coding conventions; as such we make use of FindBugz, Code Templates and Code Formatters for all the small stuff.</p>

<p>This page covers what is left.</p>
<div>
<ul>
<ul>
    <li><a href='#5.CodingConventions-ConvertingaURLtoaFile'>Converting a URL to a File</a></li>
    <li><a href='#5.CodingConventions-ExampleChecklistforanImportWizard'>Example Checklist for an Import Wizard</a></li>
</ul>
</ul></div>

<h2><a name="5.CodingConventions-ConvertingaURLtoaFile"></a>Converting a URL to a File</h2>

<p>When you need to convert a java.net.URL object to a java.io.File object, you must take care that you do not ignore the 'authority' property on the URL object. This contains information about the server that the file is located on. On Windows systems, this includes the drive or network share, such as "E:" or "fooServer".</p>

<p>The rule is simple: If URL.getAuthority isn't null or empty, then the File should be constructed like so:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">URL url = ...
File f = <span class="code-keyword">new</span> File(<span class="code-quote">"<span class="code-comment">//"</span> + url.getAuthority() + url.getPath());</span></pre>
</div></div>

<p>It is very important that you always check the authority when converting to a File! </p>

<p>There is a utility method in URLUtils that will do this for you:</p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-java">File f = URLUtils.urlToFile(url);</pre>
</div></div>

<p>Use it!</p>

<h2><a name="5.CodingConventions-ExampleChecklistforanImportWizard"></a>Example Checklist for an Import Wizard</h2>

<p>The preceding sections on <a href="1 UDIG Guidelines.html" title="1 UDIG Guidelines">1 UDIG Guidelines</a>,<a href="2 Eclipse House Rules.html" title="2 Eclipse House Rules">2 Eclipse House Rules</a> and <a href="3 User Interface Guidelines.html" title="3 User Interface Guidelines">3 User Interface Guidelines</a> may be a little bit abstract. Here is the results of apply those guidelines into an actual Quality Assurance Checklist for the UDIGImportPage.</p>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Check </th>
<th class='confluenceTh'> Load Data </th>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> listed in the "Add Layer" and "Data Import" wizards </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> banner and a title </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> starts with a prompt (not an error message) </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> tab order as fields are filled in </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> test if data is loaded correctly </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> test that new content is selected (in layer or catalog view) </td>
</tr>
<tr>
<th class='confluenceTh'> Check </th>
<th class='confluenceTh'> Context and Error </th>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> starts with fields based on workspace context (ie the data we just loaded)</td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> restart page and check that history is remembered </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> fill out the fields incorrectly and check reporting of error messages </td>
</tr>
<tr>
<th class='confluenceTh'> Check </th>
<th class='confluenceTh'> DnD </th>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> DnD with appropriate URL (check of canProcess method) </td>
</tr>
<tr>
<th class='confluenceTh'> Check </th>
<th class='confluenceTh'> Help and Internationalization </th>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Check for presense of online reference page for this wizard </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Press F1 and (or click on the ?) for context sensitive help </td>
</tr>
<tr>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Restart and run tests with French </td>
</tr>
</tbody></table>

<p>Implementation Tips</p>
<ul>
	<li>Workspace context is based on IDataWizard.getSelection().</li>
	<li>History is maintained in Dialog settings and is remembered across runs (See <a href="10 Adding History to Dialogs and Wizards.html" title="10 Adding History to Dialogs and Wizards">10 Adding History to Dialogs and Wizards</a>)</li>
	<li>Steal an existing <a href="wizban.html" title="wizban">wizban</a> image and modify</li>
	<li>jdbc urls are not "valid" urls, see the <a href="http://java.sun.com/docs/books/tutorial/jdbc/basics/connecting.html">jdbc trail</a> and are not usual done using DND</li>
</ul>


<p>Code Checks</p>
<ul>
	<li>Turn on all warnings as in environment setup</li>
	<li>Classes have at minimum a javadoc comment</li>
	<li>Strings should be externalized for internationalization</li>
</ul>


<small>
  (c) Copyright (c) 2004-2008 Refractions Research Inc. and others.<br>
  <a href="http://udig.refractions.net/confluence/pages/viewpage.action?pageId=10105">[wiki]</a>
</small>
    </body>
</html>